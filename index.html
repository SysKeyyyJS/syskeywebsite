<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SysKeyyyy</title>
  <link rel="stylesheet" href="style.css"> <!-- External CSS -->
</head>
<body>
  <button class="darkmode-toggle" id="themeToggle">Toggle Dark Mode</button>
  
  <div class="header-container">
    <h1>üëã Hello! I am SysKey.</h1>
    <img src="assets\images\profilepic.png" alt="Profile Picture" class="profile-pic">
  </div>

  <p id="greeting">Loading location...</p>

  <p>I know a lot about you now! Lets get to know me!</p>
  <li>
    I am a member of FTG2085.
  </li>
  <li>
    I like Minecraft, GMOD, GTAV, LSPDFR and some other stuff too.
  </li>
  <li>
    Sometimes I code stuff (like this site)
  </li>
  <li>
    Converting to Orthodox Christianity ‚ò¶Ô∏è
  </li>

  <center>
    <p>Please view this advertisement that I do not get paid to show you.</p>
    <iframe src="https://slashvertisement.sl4sh.site/get" width="732" height="94" style="border:none;"></iframe>
  </center>

  <footer>
    <p id="fog">
      The Fog is Coming. The Fog is Coming. The Fog is Coming. The Fog is Coming. 
      The Fog is Coming. The Fog is Coming. The Fog is Coming. The Fog is Coming. 
      The Fog is Coming. The Fog is Coming. The Fog is Coming. The Fog is Coming. 
      The Fog is Coming. The Fog is Coming. The Fog is Coming. The Fog is Coming. 
    </p>
    <p id="lineCount"></p>
  </footer>

  <script>
    const body = document.body;
    const toggleBtn = document.getElementById("themeToggle");

    // Apply saved theme if it exists
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme) {
      body.classList.add(savedTheme);
    } else {
      if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        body.classList.add("dark");
      } else {
        body.classList.add("light");
      }
    }

    toggleBtn.addEventListener("click", () => {
      if (body.classList.contains("dark")) {
        body.classList.remove("dark");
        body.classList.add("light");
        localStorage.setItem("theme", "light");
      } else {
        body.classList.remove("light");
        body.classList.add("dark");
        localStorage.setItem("theme", "dark");
      }
    });

    // Fetch detailed location from IP
    async function fetchCityGreeting() {
      try {
        const response = await fetch('https://ipapi.co/json/');
        if (!response.ok) throw new Error('Network error');
        const data = await response.json();

        const city = data.city || "Unknown City";
        const region = data.region || "Unknown Region";
        const postal = data.postal || "???";
        const country = data.country_name || "Unknown Country";
        const ip = data.ip || "???";
        const isp = data.org || "Unknown ISP";

        document.getElementById('greeting').textContent =
          `Hello, you are from ${city}, ${region} ${postal}, ${country}. ` +
          `Your IP is ${ip} and your internet provider is ${isp}. üëÄ`;
      } catch (err) {
        console.error('Geolocation fetch failed:', err);
        document.getElementById('greeting').textContent = 'Hello there!';
      }
    }
    fetchCityGreeting();

    // Count lines of code in the document
    function countLines() {
      const htmlSource = document.documentElement.outerHTML;
      const lineCount = htmlSource.split('\n').length;
      document.getElementById('lineCount').textContent =
        `This website is made up of ${lineCount} lines of code.`;
    }
    countLines();
  </script>
</body>
</html>
