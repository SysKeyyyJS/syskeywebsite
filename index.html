<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SysKeyyyy</title>
  <style>
    :root {
      --bg-color: white;
      --text-color: black;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg-color: #121212;
        --text-color: #f5f5f5;
      }
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: Arial, sans-serif;
      transition: background-color 0.3s, color 0.3s;
      margin: 20px;
    }

    footer {
      margin-top: 20px;
      font-size: 0.9em;
    }

    .darkmode-toggle {
      position: fixed;
      top: 10px;
      right: 10px;
      padding: 8px 14px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #444;
      color: #fff;
      font-size: 14px;
    }

    .dark {
      --bg-color: #121212;
      --text-color: #f5f5f5;
    }

    .light {
      --bg-color: white;
      --text-color: black;
    }
  </style>
</head>
<body>
  <button class="darkmode-toggle" id="themeToggle">Toggle Dark Mode</button>

  <h1>I am SysKey.</h1>
  <p id="greeting">Loading location...</p> <!-- Greeting shows up here -->

  <p>
    Please visit me @ 5002 Circled Oak Dr. Sarasota Florida. Send Pizza. Please.
  </p>
  <p>
    Please check out my other pals! @ <a href="https://ftg.wtf">ftg.wtf</a>
  </p>

  <center>
    <p>Please view this advertisement that I do not get paid to show you.</p>
    <iframe src="https://slashvertisement.sl4sh.site/get" width="732" height="94" style="border:none;"></iframe>
  </center>

  <footer>
    <p id="fog">
      The Fog is Coming. The Fog is Coming. The Fog is Coming. The Fog is Coming. 
      The Fog is Coming. The Fog is Coming. The Fog is Coming. The Fog is Coming. 
      The Fog is Coming. The Fog is Coming. The Fog is Coming. The Fog is Coming. 
      The Fog is Coming. The Fog is Coming. The Fog is Coming. The Fog is Coming. 
    </p>
    <p id="lineCount"></p> <!-- Line count will go here -->
  </footer>

  <script>
    const body = document.body;
    const toggleBtn = document.getElementById("themeToggle");

    // Apply saved theme if it exists
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme) {
      body.classList.add(savedTheme);
    } else {
      if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        body.classList.add("dark");
      } else {
        body.classList.add("light");
      }
    }

    toggleBtn.addEventListener("click", () => {
      if (body.classList.contains("dark")) {
        body.classList.remove("dark");
        body.classList.add("light");
        localStorage.setItem("theme", "light");
      } else {
        body.classList.remove("light");
        body.classList.add("dark");
        localStorage.setItem("theme", "dark");
      }
    });

    // Fetch detailed location from IP
    async function fetchCityGreeting() {
      try {
        const response = await fetch('https://ipapi.co/json/');
        if (!response.ok) throw new Error('Network error');
        const data = await response.json();

        const city = data.city || "Unknown City";
        const region = data.region || "Unknown Region";
        const postal = data.postal || "???";
        const country = data.country_name || "Unknown Country";
        const ip = data.ip || "???";
        const isp = data.org || "Unknown ISP";

        document.getElementById('greeting').textContent =
          `Hello, you are from ${city}, ${region} ${postal}, ${country}. ` +
          `Your IP is ${ip} and your internet provider is ${isp}. ðŸ‘€`;
      } catch (err) {
        console.error('Geolocation fetch failed:', err);
        document.getElementById('greeting').textContent = 'Hello there!';
      }
    }
    fetchCityGreeting();

    // Count lines of code in the document
    function countLines() {
      const htmlSource = document.documentElement.outerHTML;
      const lineCount = htmlSource.split('\n').length;
      document.getElementById('lineCount').textContent =
        `This website is made up of ${lineCount} lines of code.`;
    }
    countLines();
  </script>
</body>
</html>